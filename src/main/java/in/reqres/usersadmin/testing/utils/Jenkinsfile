pipeline{
    agent any
    stages{
        stage('Build'){
            steps{
                echo 'Building'
            }
        }
        stage('Test'){
            steps{
                withGradle(){
                    bat 'C:/Windows/System32/config/systemprofile/AppData/Local/Jenkins/.jenkins/tools/hudson.plugins.gradle.GradleInstallation/Gradle6.3/bin/gradle clean test --scan --info'
                }
            }
        }
        stage('Deploy'){
            steps{
                  echo 'Deploying'
            }
        }
    }
    post {
            always {
                echo 'One way or another, I have finished'
                deleteDir() /* clean up our workspace */
            }
            success {
                echo 'I succeeded!'
            }
            unstable {
                echo 'I am unstable :/'
            }
            failure {
                echo 'I failed :('
            }
            changed {
                echo 'Things were different before...'
            }
        }
}